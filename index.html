<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Haig Fras Digital Twin</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="css/print-site-enum-headings1.css" rel="stylesheet">
        <link href="css/print-site-enum-headings2.css" rel="stylesheet">
        <link href="css/print-site-enum-headings3.css" rel="stylesheet">
        <link href="css/print-site-enum-headings4.css" rel="stylesheet">
        <link href="css/print-site-enum-headings5.css" rel="stylesheet">
        <link href="css/print-site-enum-headings6.css" rel="stylesheet">
        <link href="css/print-site.css" rel="stylesheet">
        <link href="css/print-site-mkdocs.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">Haig Fras Digital Twin</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem active">
                                <a href="." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" class="nav-link disabled">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="about/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#home" class="nav-link">Home</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#general-project-infrastructure" class="nav-link">General Project Infrastructure</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#prototype" class="nav-link">Prototype</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#repositories" class="nav-link">Repositories</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#server-instance-organization" class="nav-link">Server Instance Organization</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#deploying-the-project" class="nav-link">Deploying the Project</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#cicd-pipeline" class="nav-link">CI/CD Pipeline</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#data-organization-object-store-and-stac-catalog" class="nav-link">Data Organization: Object Store and STAC Catalog</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#data-format-conversion" class="nav-link">Data Format Conversion</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#authentication" class="nav-link">Authentication</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#frontend-application" class="nav-link">Frontend Application</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#backend-application" class="nav-link">Backend Application</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tile-servers" class="nav-link">Tile Servers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#application-tests" class="nav-link">Application Tests</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#container-monitoring" class="nav-link">Container Monitoring</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="home">Home</h1>
<p>The Haig Fras Digital Twin project aims to establish a system representing a Digital Twin for the Haig Fras environmental protection area in the Celtic Sea.</p>
<h2 id="general-project-infrastructure">General Project Infrastructure</h2>
<p>This project is based on a web-client that accesses data from different locations and uses various microservices related to APIs and tile servers. Below, we will describe the project's infrastructure in more detail.</p>
<p><img alt="Project Schema" src="assets/project_schema.png" /></p>
<p>As shown in the figure above, both the frontend and all microservices are running in Docker containers. These Docker containers are stored in a container registry. Currently, we are using the container registry of BODC, based on Nexus, and the Oracle Cloud. The containers are updated each time a push is made to the master repository of the container.</p>
<p>The final versions of the docker containers are available below:</p>
<ul>
<li>Frontend: docker-repo.bodc.me/oceaninfo/imfe-pilot/frontend:v1.0</li>
<li>API: docker-repo.bodc.me/oceaninfo/imfe-pilot/api_calculations_use_cases_web:v1.0</li>
<li>Tileserver: docker-repo.bodc.me/oceaninfo/imfe-pilot/tileserver:v1.0</li>
<li>MBTiles Server: docker-repo.bodc.me/oceaninfo/imfe-pilot/mbtiles:v1.0</li>
<li>Docker monitor: docker-repo.bodc.me/oceaninfo/imfe-pilot/monitor_docker:v1.0</li>
</ul>
<h2 id="prototype">Prototype</h2>
<p>Before the start of the project, a prototype of the system was developed to understand the user journey throughout the application usage. This prototype was developed using FIGMA, which was essential for understanding many of the features that would later be integrated and for facilitating the platform's styling programming.</p>
<p>The final version of the FIGMA prototype can be accessed <a href="https://www.figma.com/file/LylND8kGXCXjJ2dMejdA9w/IMFE-PILOT?type=design&amp;node-id=1%3A2&amp;mode=design&amp;t=jrJU4IAJ7EWn5Xf2-1">here</a>.</p>
<h2 id="repositories">Repositories</h2>
<p>These are the project repositories:</p>
<ul>
<li>
<p><a href="https://gitlab.com/nocacuk/ocean-informatics/imfepilot/bodc-code">bodc-code</a>: <code>!WARNING: PRIVATE PROJECT</code> This was the initial repository of the project when it was conceived. It contains the early drafts of the code used in the project. Additionally, it still holds a significant portion of the documentation related to data format conversion.</p>
</li>
<li>
<p><a href="https://github.com/NOC-OI/data_pipelines">Data Pipelines</a>: This repository contains all the code for data format conversion, data uploading to the Object Store, and STAC Catalog creation.</p>
</li>
<li>
<p><a href="https://github.com/NOC-OI/imfe-pilot-frontend">frontend</a>: A frontend application created in React, with the ability to interact with different data formats on both the backend and frontend. This project depends on certain backend services to perform tile server activities, as well as authentication and data calculations.</p>
</li>
<li>
<p><a href="https://github.com/NOC-OI/imfe-pilot-tileserver">tileserver</a>: Repository for configuring and creating tile servers.</p>
</li>
<li>
<p><a href="https://github.com/NOC-OI/monitor_docker">monitor_docker</a>: A Python package for monitoring container operation on the server.</p>
</li>
<li>
<p><a href="https://github.com/NOC-OI/imfe-pilot-frontend_tests">frontend_test</a>: Repository containing Selenium tests for the frontend.</p>
</li>
<li>
<p><a href="https://github.com/NOC-OI/imfe-pilot-salt_config">salt_config</a>: Repository contaning the Salt configuration for the VM.</p>
</li>
</ul>
<h2 id="server-instance-organization">Server Instance Organization</h2>
<p>The organization of server instances is carried out through the <a href="https://github.com/NOC-OI/imfe-pilot-salt_config">salt_config</a> repository. This repository is based on the configuration of server stacks in the <a href="https://saltproject.io/">Salt project</a>. More information about the use and configuration of Salt can be found in the <a href="https://github.com/NOC-OI/imfe-pilot-salt_config">Salt repository in this project</a>.</p>
<h2 id="deploying-the-project">Deploying the Project</h2>
<p>To deploy the project, follow the procedures <a href="deploy/">described here</a>.</p>
<h2 id="cicd-pipeline">CI/CD Pipeline</h2>
<p>This repository includes an automatic GitLab CI/CD pipeline for continuous integration and continuous deployment. More information about this pipeline can be found in the <a href="cicd/">CI/CD Pipeline documentation</a>.</p>
<h2 id="data-organization-object-store-and-stac-catalog">Data Organization: Object Store and STAC Catalog</h2>
<p>All project data files are stored in an object store. In this case, the files are accessed via HTTP requests, without the need for an intermediate database or an API.</p>
<p>As the object store appears as a group of files, it is necessary to create a catalog of these files, called an <a href="https://stacspec.org/en">STAC Catalog</a>. The STAC catalog for this project can be accessed <a href="https://radiantearth.github.io/stac-browser/#/external/pilot-imfe-o.s3-ext.jc.rl.ac.uk/haig-fras/stac/catalog.json">here</a>. For more information on how to generate the STAC Catalog, refer to the <a href="https://github.com/NOC-OI/data_pipelines">Data Pipelines repository</a>.</p>
<p>This project suggests an organization of files in the Object Store, as <a href="object_store/">described here</a>.</p>
<p>If you want to understand a little bit more about how we deal with STAC Catalogs, please <a href="stac/">click here</a>.</p>
<h2 id="data-format-conversion">Data Format Conversion</h2>
<p>In this project, data from different formats is converted into formats optimized for the cloud. Data conversion is performed through a series of Python codes that convert data from the following formats: GeoTIFF, GeoJSON, Shapefile, FlatGeoBuf, COG, Zarr, NetCDF, among others.</p>
<p>The codes for converting data are described in the <a href="https://github.com/NOC-OI/data_pipelines">Data Pipelines repository</a>.</p>
<p>More information about all the data types that we have been working with are described below:</p>
<ul>
<li>
<p><a href="cog/">Cloud Optimized GeoTIFF</a></p>
</li>
<li>
<p><a href="mbtiles/">MBTiles</a></p>
</li>
<li>
<p><a href="wms/">WMS Layers</a></p>
</li>
<li>
<p><a href="cesium_ion/">Cesium Ion</a></p>
</li>
<li>
<p><a href="photos/">CSV - Organisms Annotation</a></p>
</li>
</ul>
<h2 id="authentication">Authentication</h2>
<p>To control access to the project's frontend, two types of authentication have been implemented: ORCID and Microsoft 365. More information can be found <a href="authentication/">here</a>.</p>
<h2 id="frontend-application">Frontend Application</h2>
<p>The frontend application was developed in React and is converted into a Docker container. This app is currently running on Jasmin and Oracle Cloud and can be accessed via the links <a href="https://imfe-pilot.noc.ac.uk">https://imfe-pilot.noc.ac.uk</a> and <a href="https://haigfras-salt.co.uk">https://haigfras-salt.co.uk</a>.</p>
<p>You can find a detailed explanation about all the frontend features <a href="frontend/">here</a>.</p>
<p>More information about the frontend application can be found in the repository: <a href="https://github.com/NOC-OI/imfe-pilot-frontend">https://github.com/NOC-OI/imfe-pilot-frontend</a></p>
<h2 id="backend-application">Backend Application</h2>
<p>Although the frontend application does not necessarily require a backend to perform most of its activities, a backend was still implemented in the project. The backend is used for the following activities:</p>
<ul>
<li>Server-side calculations for the Digital Twin for Haig Fras project.</li>
<li>Management and access to the user table, enabling authentication.</li>
</ul>
<p>This app is currently running on Jasmin and Oracle Cloud and can be accessed via the links <a href="https://imfe-pilot-api.noc.ac.uk/">https://imfe-pilot-api.noc.ac.uk</a> and <a href="https://haigfras-salt-api.co.uk/">https://haigfras-salt-api.co.uk</a>.</p>
<p>More information about the backend application can be found in the <a href="https://github.com/NOC-OI/imfe-pilot-api">repository</a> or in this <a href="backend/">link</a>.</p>
<h2 id="tile-servers">Tile Servers</h2>
<p>Some data formats require the use of tile servers to optimize data rendering on the frontend. For this project, the following servers are used:</p>
<p>1) Titiler: FastAPI application for dynamic tiling. It is used for COG files. You can see more information <a href="cog/">here</a>.
2) MBTiles: a Python server for organizing mbtiles files from object stores. You can see more information <a href="mbtiles/">here</a>.</p>
<p>The tile servers are converted into Docker containers. More information about the servers can be found in the repository: <a href="https://github.com/NOC-OI/imfe-pilot-tileserver">https://github.com/NOC-OI/imfe-pilot-frontend_tests</a>.</p>
<h2 id="application-tests">Application Tests</h2>
<p>A repository was created with the aim of conducting integration tests for the project. With these tests, it is possible to assess whether any changes to the frontend or any of the microservices will or will not impact the project as a whole.</p>
<p>Further information can be found in the project repository: <a href="https://github.com/NOC-OI/imfe-pilot-frontend_tests">https://github.com/NOC-OI/imfe-pilot-frontend_tests</a>.</p>
<h2 id="container-monitoring">Container Monitoring</h2>
<p>To monitor the availability of the frontend application, as well as the microservices, a package has been implemented with the objective to monitor the operation of Docker containers on a virtual machine (VM). This package operates as follows:</p>
<ul>
<li>At certain time intervals, the VM will run a script that saves a CSV file with the status of all containers (including those already finished).</li>
<li>A set of commands within a Docker container, also on the VM, will evaluate this file. If there are any changes in the status of the containers or if they are not functioning properly, an email group will be notified.</li>
<li>If any container encounters an issue, an email will be sent with the subject "Issues with container(s): {container-names}".</li>
<li>If the situation returns to normal, an email with the subject "Containers OK!" will be sent, indicating that all containers are now working correctly.</li>
</ul>
<p>More information about this task can be found in the repository: <a href="https://github.com/NOC-OI/monitor_docker">https://github.com/NOC-OI/monitor_docker</a>.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/jquery-3.6.0.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="js/print-site.js"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.5.3
Build Date UTC : 2024-01-29 15:02:29.406678+00:00
-->
